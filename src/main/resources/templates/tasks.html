<!DOCTYPE html>
<html xmlns:th="http://w3.org/1999/xhtml">

<head th:replace="common/header :: common-header">
<title>Page titles</title>
</head>


<body>
	<div class="overlay"></div>
	<nav class="cbp-spmenu cbp-spmenu-vertical cbp-spmenu-right"
		id="cbp-spmenu-s1"></nav>
	<main class="page-content content-wrap">

	<div th:replace="common/header :: common-navbar" class="navbar"></div>
	<!-- Navbar -->

	<div th:replace="common/header :: common-sidebar"></div>
	<!-- Sidebar -->

	<div class="page-inner">
		<div class="page-title">
			<h3>WYS</h3>
			<div class="page-breadcrumb">
				<ol class="breadcrumb">
					<li><a th:href="@{/dashboard}">Home</a></li>
					<li class="active">Register task</li>

				</ol>
			</div>
		</div>
		<div id="main-wrapper" th:fragment="body-doctor">
			<div class="row">
				<div class="col-md-9">



					<div class="col-md-12">
						<div class="panel panel-white">
							<div class="panel-heading clearfix">
								<h4 class="panel-title">Tasks List</h4>
							</div>
							<div class="panel-body">
								<div class="row">
									<div class="col-md-12">

										<div class="">
											<table id="example" class="display table"
												style="width: 100%; cellspacing: 0;">
												<thead>
													<tr>
														<th>Name</th>
														<th>Project</th>
														<th>Duration</th>
														<th>Start Date</th>
														<th>Description</th>
														<th>Status</th>
														<th>Action</th>
													</tr>
												</thead>
												<tbody>
													<tr th:each="list : ${taskList}">
														<td th:text="${list.name}">---</td>
														<td th:text="${list.project.name}">---</td>
														<td th:text="${list.duration}">---</td>
														<td
															th:text="${#dates.format(list.startTime, 'dd-MMM-yyyy')}"></td>
														<td th:text="${list.description}"></td>
														<td th:text="${list.status}">..</td>
														<td>
															<div class="btn-group m-b-sm">
																<button type="button"
																	class="btn btn-primary dropdown-toggle"
																	data-toggle="dropdown" aria-expanded="false">
																	Action <span class="caret"></span>
																</button>
																<ul class="dropdown-menu" role="menu">
																	<li><a th:href="'#edit'+${list.id}"
																		data-toggle="modal">Edit</a></li>
																	<li><a th:href="'#edit'+${list.id}"
																		data-toggle="modal">Assign to User</a></li>
																	<li><a href="#">Delete</a></li>
																	<li><a th:href="'#changestatus'+${list.id}"
																		data-toggle="modal">Change Task Status</a></li>
																</ul>
															</div>
														</td>
														<div class="modal fade bs-example-modal-sm" role="dialog"
															aria-labelledby="mySmallModalLabel"
															th:id="'edit'+${list.id}" aria-hidden="true">
															<div class="modal-dialog modal-md">
																<div class="modal-content">
																	<div class="modal-header">
																		<button type="button" class="close"
																			data-dismiss="modal" aria-label="Close">
																			<span aria-hidden="true">&times;</span>
																		</button>
																		<h4 class="modal-title" id="mySmallModalLabel">Edit
																			Task</h4>
																	</div>
																	<form method="POST" th:action="@{/task/edit}">
																		<div class="modal-body">
																			<div class="row">


																				<div class="form-group col-md-6">
																					<label for="id">Task ID</label> <input type="text"
																						th:value="${list.id}" id="id" readonly="readonly"
																						name="id" class="form-control" />
																				</div>
																				<div class="form-group col-md-6">
																					<label for="name">Name</label> <input type="text"
																						th:value="${list.name}" name="name"
																						class="form-control" id="name"
																						placeholder="Name..." />
																				</div>

																				<div class="form-group col-md-6">
																					<label for="name">Project</label> <select
																						id="projectId" style="width: 100%;"
																						required="required" class="form-control"
																						name="projectId">
																						<option selected="selected"
																							th:text="${list.project.name}"
																							th:value="${list.project.id}">Select
																							Project</option>
																						<option th:each="project : ${projectList}"
																							th:value="${project.id}"
																							th:text="${project.name}"></option>
																					</select>
																				</div>

																				<div class="form-group col-md-6">
																					<label for="datepicker">Start Date</label> <input
																						th:value="${#dates.format(list.startTime, 'dd/MM/yyyy')}"
																						name="startTime" class="form-control date-picker"
																						id="datepicker" readonly="readonly" />

																				</div>

																				<div class="form-group col-md-6">
																					<label for="duration">Duration</label> <input
																						type="number" th:value="${list.duration}"
																						name="duration" class="form-control" id="duration"
																						placeholder="Duartion..." />
																				</div>
																				<div class="form-group col-md-6">
																					<label for="description">Description</label>
																					<textarea rows="4" id="description"
																						name="description" th:text="${list.description}"
																						required="required" class="form-control"
																						placeholder="Description..."></textarea>
																				</div>
																			</div>
																		</div>
																		<div class="modal-footer">
																			<button type="button" class="btn btn-default"
																				data-dismiss="modal">Close</button>
																			<input type="hidden" name="${_csrf.parameterName}"
																				value="${_csrf.token}" />
																			<button type="submit" class="btn btn-success">Submit</button>
																		</div>
																	</form>
																</div>
															</div>
														</div>




														<div class="modal fade bs-example-modal-sm" role="dialog"
															aria-labelledby="mySmallModalLabel"
															th:id="'changestatus'+${list.id}" aria-hidden="true">
															<div class="modal-dialog modal-md">
																<div class="modal-content">
																	<div class="modal-header">
																		<button type="button" class="close"
																			data-dismiss="modal" aria-label="Close">
																			<span aria-hidden="true">&times;</span>
																		</button>
																		<h4 class="modal-title">Change Task Status</h4>
																	</div>
																	<form method="POST" th:action="@{/task/changestatus}">
																		<div class="modal-body">
																			<div class="row">

																				<div class="form-group col-md-12">
																					<input type="hidden" th:value="${list.id}"
																						id="taskId" name="taskId" class="form-control" />
																				</div>

																				<div class="form-group col-md-12">
																					<h4 class="modal-title" id="mySmallModalLabel"
																						th:text="'Are
																you sure you want to change the status of the task named ('+${list.name}+') ?'"></h4>
																				</div>

																			</div>
																		</div>
																		<div class="modal-footer">
																			<button type="button" class="btn btn-default"
																				data-dismiss="modal">Close</button>
																			<input type="hidden" name="${_csrf.parameterName}"
																				value="${_csrf.token}" />
																			<button type="submit" class="btn btn-success">Change
																				Status</button>
																		</div>
																	</form>
																</div>
															</div>
														</div>


													</tr>
												</tbody>
											</table>
										</div>

									</div>
								</div>
							</div>
						</div>
					</div>



				</div>
				<div class="well col-md-3">
					<div class="panel panel-white">
						<div class="panel-heading clearfix">
							<h4 class="panel-title">Title</h4>
						</div>
						<div class="panel-body">

							<div class="table-responsive">

								<table id="example9" class="display table"
									style="width: 100%; cellspacing: 0;">
									<thead>
										<tr>

										</tr>
									</thead>
									<tbody>
										<tr>

										</tr>

									</tbody>
								</table>
							</div>
						</div>
					</div>


				</div>
				<!-- Row -->
			</div>




		</div>



		<div class="page-footer">
			<p class="no-s">S. Jules, 2019 &copy; WYS</p>
		</div>
	</div>
	<!-- Page Inner --> </main>
	<!-- Page Content -->

	<div class="cd-overlay"></div>

	<div th:replace="common/header :: body-bottom-scripts"></div>
	<!--Start of Tawk.to Script-->
	<script th:inline="javascript">
		/*<![CDATA[*/

		$('#datepicker').datepicker({
			daysOfWeekDisabled : [ 0, 6 ],
			autoclose : true,
		});

		/*]]>*/
	</script>


</body>


</html>