<!DOCTYPE html>
<html xmlns:th="http://w3.org/1999/xhtml">

<head th:replace="common/header :: common-header">
<title>Page titles</title>
</head>

<body>
	<div class="overlay"></div>

	<main class="page-content content-wrap">
	<div th:replace="common/header :: common-navbar" class="navbar"></div>
	<!-- Navbar -->

	<div th:replace="common/header :: common-sidebar"></div>
	<!-- Sidebar -->

	<div class="page-inner">
		<div class="page-title">
			<h3>HOME</h3>
			<div class="page-breadcrumb">
				<ol class="breadcrumb">
					<li><a href="#">Task</a></li>
					<li class="active">Todo</li>
				</ol>
			</div>
		</div>
		<div id="main-wrapper">
			<div class="row">

				<div class="col-lg-12 col-md-12">
					<div class="panel panel-white">
						<div class="panel-heading">
							<h4 class="panel-title">Project Stats</h4>
						</div>
						<div class="panel-body">
							<div class="table-responsive project-stats">
								<table class="table">
									<thead>
										<tr>
											<th>#</th>
											<th>Project</th>
											<th>Task</th>
											<th>Status</th>
											<th>Progress</th>
											<th>Actions</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="list : ${taskList}">
											<td th:text="${list.task.project.id}">---</td>
											<td th:text="${list.task.project.name}">---</td>
											<td th:text="${list.task.name}">---</td>
											<td th:text="${list.task.status}">---</td>
											<td>---</td>
											<td>
												<div class="btn-group m-b-sm">
													<button type="button"
														class="btn btn-primary dropdown-toggle"
														data-toggle="dropdown" aria-expanded="false">
														Action <span class="caret"></span>
													</button>
													<ul class="dropdown-menu" role="menu">
														<li><a th:href="'#changestatus'+${list.task.id}"
															data-toggle="modal">Change Task Status</a></li>
													</ul>
												</div>
											</td>
											<div class="modal fade bs-example-modal-sm" role="dialog"
															aria-labelledby="mySmallModalLabel"
															th:id="'changestatus'+${list.task.id}" aria-hidden="true">
															<div class="modal-dialog modal-md">
																<div class="modal-content">
																	<div class="modal-header">
																		<button type="button" class="close"
																			data-dismiss="modal" aria-label="Close">
																			<span aria-hidden="true">&times;</span>
																		</button>
																		<h4 class="modal-title">Change
																			Task Status</h4>
																	</div>
																	<form method="POST" th:action="@{/task/changestatus}">
																		<div class="modal-body">
																			<div class="row">

																				<div class="form-group col-md-12">
																					<input type="hidden" th:value="${list.task.id}"
																						id="taskId" name="taskId" class="form-control" />
																				</div>

																				<div class="form-group col-md-12">
																					<h4 class="modal-title" id="mySmallModalLabel"
																						th:text="'Are
																you sure you want to change the status of the task named ('+${list.task.name}+') ?'"></h4> 
																				</div>

																			</div>
																		</div>
																		<div class="modal-footer">
																			<button type="button" class="btn btn-default"
																				data-dismiss="modal">Close</button>
																			<input type="hidden" name="${_csrf.parameterName}"
																				value="${_csrf.token}" />
																			<button type="submit" class="btn btn-success">Change
																				Status</button>
																		</div>
																	</form>
																</div>
															</div>
														</div>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>
	</main>

	<div th:replace="common/header :: body-bottom-scripts"></div>
	<script th:src="@{/js/pages/todo.js}"></script>
</body>
</html>

